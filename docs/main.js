var T=class{constructor(){this._events={}}on(t,n,o={}){this._events[t]=this._events[t]||[],this._events[t].push({fn:n,options:o})}off(t,n){let o=this._events[t]||[];this._events[t]=o.filter(s=>s.fn!==n)}find(t){return this._events[t]}run(t,...n){let o=this.getSubscribers(t,this._events);return console.assert(o&&o.length>0,"No subscriber for event: "+t),o.forEach(s=>{let{fn:i,options:r}=s;return r.delay?this.delay(t,i,n,r):Object.keys(r).length>0?i.apply(this,[...n,r]):i.apply(this,n),!s.options.once}),o.length}once(t,n,o={}){this.on(t,n,Object.assign(Object.assign({},o),{once:!0}))}delay(t,n,o,s){s._t&&clearTimeout(s._t),s._t=setTimeout(()=>{clearTimeout(s._t),Object.keys(s).length>0?n.apply(this,[...o,s]):n.apply(this,o)},s.delay)}query(t,...n){let o=this.getSubscribers(t,this._events);console.assert(o&&o.length>0,"No subscriber for event: "+t);let s=o.map(i=>{let{fn:r,options:a}=i;return Object.keys(a).length>0?r.apply(this,[...n,a]):r.apply(this,n)});return Promise.all(s)}getSubscribers(t,n){let o=n[t]||[];return n[t]=o.filter(s=>!s.options.once),Object.keys(n).filter(s=>s.endsWith("*")&&t.startsWith(s.replace("*",""))).sort((s,i)=>i.length-s.length).forEach(s=>o.push(...n[s].map(i=>Object.assign(Object.assign({},i),{options:Object.assign(Object.assign({},i.options),{event:t})})))),o}},x,_=typeof self=="object"&&self.self===self&&self||typeof global=="object"&&global.global===global&&global;_.app&&_._AppRunVersions?x=_.app:(x=new T,_.app=x,_._AppRunVersions="AppRun-3");var l=x,y=(e,t)=>(t?e.state[t]:e.state)||"",b=(e,t,n)=>{if(t){let o=e.state||{};o[t]=n,e.setState(o)}else e.setState(n)},j=(e,t)=>{if(Array.isArray(e))return e.map(n=>j(n,t));{let{tag:n,props:o,children:s}=e;return n?(o&&Object.keys(o).forEach(i=>{i.startsWith("$")&&(((r,a,m,c)=>{if(r.startsWith("$on")){let p=a[r];if(r=r.substring(1),typeof p=="boolean")a[r]=h=>c.run?c.run(r,h):l.run(r,h);else if(typeof p=="string")a[r]=h=>c.run?c.run(p,h):l.run(p,h);else if(typeof p=="function")a[r]=h=>c.setState(p(c.state,h));else if(Array.isArray(p)){let[h,...u]=p;typeof h=="string"?a[r]=f=>c.run?c.run(h,...u,f):l.run(h,...u,f):typeof h=="function"&&(a[r]=f=>c.setState(h(c.state,...u,f)))}}else if(r==="$bind"){let p=a.type||"text",h=typeof a[r]=="string"?a[r]:a.name;if(m==="input")switch(p){case"checkbox":a.checked=y(c,h),a.onclick=u=>b(c,h||u.target.name,u.target.checked);break;case"radio":a.checked=y(c,h)===a.value,a.onclick=u=>b(c,h||u.target.name,u.target.value);break;case"number":case"range":a.value=y(c,h),a.oninput=u=>b(c,h||u.target.name,Number(u.target.value));break;default:a.value=y(c,h),a.oninput=u=>b(c,h||u.target.name,u.target.value)}else m==="select"?(a.value=y(c,h),a.onchange=u=>{u.target.multiple||b(c,h||u.target.name,u.target.value)}):m==="option"?(a.selected=y(c,h),a.onclick=u=>b(c,h||u.target.name,u.target.selected)):m==="textarea"&&(a.innerHTML=y(c,h),a.oninput=u=>b(c,h||u.target.name,u.target.value))}else l.run("$",{key:r,tag:m,props:a,component:c})})(i,o,n,t),delete o[i])}),s&&(s=j(s,t)),{tag:n,props:o,children:s}):e}};function B(e,...t){return R(t)}function R(e){let t=[],n=o=>{o!=null&&o!==""&&o!==!1&&t.push(typeof o=="function"||typeof o=="object"?o:`${o}`)};return e&&e.forEach(o=>{Array.isArray(o)?o.forEach(s=>n(s)):n(o)}),t}var H=new WeakMap;function C(e,t,n){t._op!==3&&(n=n||t.tag==="svg",function(o,s){let i=o.nodeName,r=`${s.tag||""}`;return i.toUpperCase()===r.toUpperCase()}(e,t)?(!(2&t._op)&&M(e,t.children,n),!(1&t._op)&&L(e,t.props,n)):e.parentNode.replaceChild(O(t,n),e))}function M(e,t,n){var o;let s=((o=e.childNodes)===null||o===void 0?void 0:o.length)||0,i=t?.length||0,r=Math.min(s,i);for(let m=0;m<r;m++){let c=t[m];if(c._op===3)continue;let p=e.childNodes[m];if(typeof c=="string")p.textContent!==c&&(p.nodeType===3?p.nodeValue=c:e.replaceChild(N(c),p));else if(c instanceof HTMLElement||c instanceof SVGElement)e.insertBefore(c,p);else{let h=c.props&&c.props.key;if(h)if(p.key===h)C(e.childNodes[m],c,n);else{let u=H[h];if(u){let f=u.nextSibling;e.insertBefore(u,p),f?e.insertBefore(p,f):e.appendChild(p),C(e.childNodes[m],c,n)}else e.replaceChild(O(c,n),p)}else C(e.childNodes[m],c,n)}}let a=e.childNodes.length;for(;a>r;)e.removeChild(e.lastChild),a--;if(i>r){let m=document.createDocumentFragment();for(let c=r;c<t.length;c++)m.appendChild(O(t[c],n));e.appendChild(m)}}function N(e){if(e?.indexOf("_html:")===0){let t=document.createElement("div");return t.insertAdjacentHTML("afterbegin",e.substring(6)),t}return document.createTextNode(e??"")}function O(e,t){if(e instanceof HTMLElement||e instanceof SVGElement)return e;if(typeof e=="string")return N(e);if(!e.tag||typeof e.tag=="function")return N(JSON.stringify(e));let n=(t=t||e.tag==="svg")?document.createElementNS("http://www.w3.org/2000/svg",e.tag):document.createElement(e.tag);return L(n,e.props,t),e.children&&e.children.forEach(o=>n.appendChild(O(o,t))),n}function L(e,t,n){let o=e._props||{};t=function(s,i){i.class=i.class||i.className,delete i.className;let r={};return s&&Object.keys(s).forEach(a=>r[a]=null),i&&Object.keys(i).forEach(a=>r[a]=i[a]),r}(o,t||{}),e._props=t;for(let s in t){let i=t[s];if(s.startsWith("data-")){let r=s.substring(5).replace(/-(\w)/g,a=>a[1].toUpperCase());e.dataset[r]!==i&&(i||i===""?e.dataset[r]=i:delete e.dataset[r])}else if(s==="style")if(e.style.cssText&&(e.style.cssText=""),typeof i=="string")e.style.cssText=i;else for(let r in i)e.style[r]!==i[r]&&(e.style[r]=i[r]);else if(s.startsWith("xlink")){let r=s.replace("xlink","").toLowerCase();i==null||i===!1?e.removeAttributeNS("http://www.w3.org/1999/xlink",r):e.setAttributeNS("http://www.w3.org/1999/xlink",r,i)}else s.startsWith("on")?i&&typeof i!="function"?typeof i=="string"&&(i?e.setAttribute(s,i):e.removeAttribute(s)):e[s]=i:/^id$|^class$|^list$|^readonly$|^contenteditable$|^role|-/g.test(s)||n?e.getAttribute(s)!==i&&(i?e.setAttribute(s,i):e.removeAttribute(s)):e[s]!==i&&(e[s]=i);s==="key"&&i&&(H[i]=e)}t&&typeof t.ref=="function"&&window.requestAnimationFrame(()=>t.ref(e))}function A(e,t,n=0){var o;if(typeof e=="string")return e;if(Array.isArray(e))return e.map(i=>A(i,t,n++));let s=e;if(e&&typeof e.tag=="function"&&Object.getPrototypeOf(e.tag).t&&(s=function(i,r,a){let{tag:m,props:c,children:p}=i,h=`_${a}`,u=c&&c.id;u?h=u:u=`_${a}${Date.now()}`;let f="section";c&&c.as&&(f=c.as,delete c.as),r.i||(r.i={});let g=r.i[h];if(!(g&&g instanceof m&&g.element)){let v=document.createElement(f);g=r.i[h]=new m(Object.assign(Object.assign({},c),{children:p})).start(v)}if(g.mounted){let v=g.mounted(c,p,g.state);v!==void 0&&g.setState(v)}return L(g.element,c,!1),g.element}(e,t,n)),s&&Array.isArray(s.children)){let i=(o=s.props)===null||o===void 0?void 0:o._component;if(i){let r=0;s.children=s.children.map(a=>A(a,i,r++))}else s.children=s.children.map(r=>A(r,t,n++))}return s}var G=(e,t={})=>class extends HTMLElement{constructor(){super()}get component(){return this._component}get state(){return this._component.state}static get observedAttributes(){return(t.observedAttributes||[]).map(n=>n.toLowerCase())}connectedCallback(){if(this.isConnected&&!this._component){let n=t||{};this._shadowRoot=n.shadow?this.attachShadow({mode:"open"}):this;let o=n.observedAttributes||[],s=o.reduce((r,a)=>{let m=a.toLowerCase();return m!==a&&(r[m]=a),r},{});this._attrMap=r=>s[r]||r;let i={};Array.from(this.attributes).forEach(r=>i[this._attrMap(r.name)]=r.value),o.forEach(r=>{this[r]!==void 0&&(i[r]=this[r]),Object.defineProperty(this,r,{get:()=>i[r],set(a){this.attributeChangedCallback(r,i[r],a)},configurable:!0,enumerable:!0})}),requestAnimationFrame(()=>{let r=this.children?Array.from(this.children):[];if(r.forEach(a=>a.parentElement.removeChild(a)),this._component=new e(Object.assign(Object.assign({},i),{children:r})).mount(this._shadowRoot,n),this._component._props=i,this._component.dispatchEvent=this.dispatchEvent.bind(this),this._component.mounted){let a=this._component.mounted(i,r,this._component.state);a!==void 0&&(this._component.state=a)}this.on=this._component.on.bind(this._component),this.run=this._component.run.bind(this._component),n.render!==!1&&this._component.run(".")})}}disconnectedCallback(){var n,o,s,i;(o=(n=this._component)===null||n===void 0?void 0:n.unload)===null||o===void 0||o.call(n),(i=(s=this._component)===null||s===void 0?void 0:s.unmount)===null||i===void 0||i.call(s),this._component=null}attributeChangedCallback(n,o,s){if(this._component){let i=this._attrMap(n);this._component._props[i]=s,this._component.run("attributeChanged",i,o,s),s!==o&&t.render!==!1&&window.requestAnimationFrame(()=>{this._component.run(".")})}}},P=(e,t,n)=>{typeof customElements<"u"&&customElements.define(e,G(t,n))},$={meta:new WeakMap,defineMetadata(e,t,n){this.meta.has(n)||this.meta.set(n,{}),this.meta.get(n)[e]=t},getMetadataKeys(e){return e=Object.getPrototypeOf(e),this.meta.get(e)?Object.keys(this.meta.get(e)):[]},getMetadata(e,t){return t=Object.getPrototypeOf(t),this.meta.get(t)?this.meta.get(t)[e]:null}};function K(e,t={}){return function(n,o){let s=e?e.toString():o;$.defineMetadata(`apprun-update:${s}`,{name:s,key:o,options:t},n)}}function Y(e,t){return function(n){return P(e,n,t),n}}var E=new Map;l.on("get-components",e=>e.components=E);var W=e=>e,S=class{constructor(t,n,o,s){this.state=t,this.view=n,this.update=o,this.options=s,this._app=new T,this._actions=[],this._global_events=[],this._history=[],this._history_idx=-1,this._history_prev=()=>{this._history_idx--,this._history_idx>=0?this.setState(this._history[this._history_idx],{render:!0,history:!1}):this._history_idx=0},this._history_next=()=>{this._history_idx++,this._history_idx<this._history.length?this.setState(this._history[this._history_idx],{render:!0,history:!1}):this._history_idx=this._history.length-1},this.start=(i=null,r)=>this.mount(i,Object.assign({render:!0},r))}renderState(t,n=null){if(!this.view)return;let o=n||this.view(t);if(l.debug&&l.run("debug",{component:this,_:o?".":"-",state:t,vdom:o,el:this.element}),typeof document!="object")return;let s=typeof this.element=="string"?document.getElementById(this.element):this.element;if(s){let i="_c";this.unload?s._component===this&&s.getAttribute(i)===this.tracking_id||(this.tracking_id=new Date().valueOf().toString(),s.setAttribute(i,this.tracking_id),typeof MutationObserver<"u"&&(this.observer||(this.observer=new MutationObserver(r=>{r[0].oldValue!==this.tracking_id&&document.body.contains(s)||(this.unload(this.state),this.observer.disconnect(),this.observer=null)})),this.observer.observe(document.body,{childList:!0,subtree:!0,attributes:!0,attributeOldValue:!0,attributeFilter:[i]}))):s.removeAttribute&&s.removeAttribute(i),s._component=this}!n&&o&&(o=j(o,this),l.render(s,o,this)),this.rendered&&this.rendered(this.state)}setState(t,n={render:!0,history:!1}){if(t instanceof Promise)Promise.all([t,this._state]).then(o=>{o[0]&&this.setState(o[0])}).catch(o=>{throw console.error(o),o}),this._state=t;else{if(this._state=t,t==null)return;this.state=t,n.render!==!1&&this.renderState(t),n.history!==!1&&this.enable_history&&(this._history=[...this._history,t],this._history_idx=this._history.length-1),typeof n.callback=="function"&&n.callback(this.state)}}mount(t=null,n){var o,s;return console.assert(!this.element,"Component already mounted."),this.options=n=Object.assign(Object.assign({},this.options),n),this.element=t,this.global_event=n.global_event,this.enable_history=!!n.history,this.enable_history&&(this.on(n.history.prev||"history-prev",this._history_prev),this.on(n.history.next||"history-next",this._history_next)),n.route&&(this.update=this.update||{},this.update[n.route]||(this.update[n.route]=W)),this.add_actions(),this.state=(s=(o=this.state)!==null&&o!==void 0?o:this.model)!==null&&s!==void 0?s:{},typeof this.state=="function"&&(this.state=this.state()),n.render?this.setState(this.state,{render:!0,history:!0}):this.setState(this.state,{render:!1,history:!0}),l.debug&&(E.get(t)?E.get(t).push(this):E.set(t,[this])),this}is_global_event(t){return t&&(this.global_event||this._global_events.indexOf(t)>=0||t.startsWith("#")||t.startsWith("/")||t.startsWith("@"))}add_action(t,n,o={}){n&&typeof n=="function"&&(o.global&&this._global_events.push(t),this.on(t,(...s)=>{l.debug&&l.run("debug",{component:this,_:">",event:t,p:s,current_state:this.state,options:o});let i=n(this.state,...s);l.debug&&l.run("debug",{component:this,_:"<",event:t,p:s,newState:i,state:this.state,options:o}),this.setState(i,o)},o))}add_actions(){let t=this.update||{};$.getMetadataKeys(this).forEach(o=>{if(o.startsWith("apprun-update:")){let s=$.getMetadata(o,this);t[s.name]=[this[s.key].bind(this),s.options]}});let n={};Array.isArray(t)?t.forEach(o=>{let[s,i,r]=o;s.toString().split(",").forEach(a=>n[a.trim()]=[i,r])}):Object.keys(t).forEach(o=>{let s=t[o];(typeof s=="function"||Array.isArray(s))&&o.split(",").forEach(i=>n[i.trim()]=s)}),n["."]||(n["."]=W),Object.keys(n).forEach(o=>{let s=n[o];typeof s=="function"?this.add_action(o,s):Array.isArray(s)&&this.add_action(o,s[0],s[1])})}run(t,...n){let o=t.toString();return this.is_global_event(o)?l.run(o,...n):this._app.run(o,...n)}on(t,n,o){let s=t.toString();return this._actions.push({name:s,fn:n}),this.is_global_event(s)?l.on(s,n,o):this._app.on(s,n,o)}unmount(){var t;(t=this.observer)===null||t===void 0||t.disconnect(),this._actions.forEach(n=>{let{name:o,fn:s}=n;this.is_global_event(o)?l.off(o,s):this._app.off(o,s)})}};S.t=!0;var w=e=>{if(e||(e="#"),e.startsWith("#")){let[t,...n]=e.split("/");l.run(t,...n)||l.run("///",t,...n),l.run("//",t,...n)}else if(e.startsWith("/")){let[t,n,...o]=e.split("/");l.run("/"+n,...o)||l.run("///","/"+n,...o),l.run("//","/"+n,...o)}else l.run(e)||l.run("///",e),l.run("//",e)};l.h=l.createElement=function(e,t,...n){let o=R(n);if(typeof e=="string")return{tag:e,props:t,children:o};if(Array.isArray(e))return e;if(e===void 0&&n)return o;if(Object.getPrototypeOf(e).t)return{tag:e,props:t,children:o};if(typeof e=="function")return e(t,o);throw new Error(`Unknown tag in vdom ${e}`)},l.render=(e,t,n={})=>{t!=null&&t!==!1&&function(o,s,i={}){if(s==null||s===!1)return;s=A(s,i);let r=o?.nodeName==="SVG";!o||(Array.isArray(s)?M(o,s,r):M(o,[s],r))}(e,t=j(t,n),n)},l.Fragment=B,l.webComponent=P,l.start=(e,t,n,o,s)=>{let i=Object.assign({render:!0,global_event:!0},s),r=new S(t,n,o);return s&&s.rendered&&(r.rendered=s.rendered),r.mount(e,i),r};var k=e=>{};l.on("$",k),l.on("debug",e=>k),l.on("//",k),l.on("#",k),l.route=w,l.on("route",e=>l.route&&l.route(e)),typeof document=="object"&&document.addEventListener("DOMContentLoaded",()=>{l.route===w&&(window.onpopstate=()=>w(location.hash),document.body.hasAttribute("apprun-no-init")||w(location.hash))}),typeof window=="object"&&(window.Component=S,window.React=l,window.on=K,window.customElement=Y);var I=window.app,st=window.Component,d=I;var V=()=>d.h(d.Fragment,null,d.h("div",{class:"sidebar"},d.h("a",{href:"/"},d.h("i",{class:"sidebar-icon fa fa-home"})),d.h("a",{href:"/contact"},d.h("i",{class:"sidebar-icon fa fa-comments"})),d.h("a",{href:"/about"},d.h("i",{class:"sidebar-icon fa fa-chalkboard-user"})),d.h("a",{href:"/products"},d.h("i",{class:"sidebar-icon fa-brands fa-product-hunt"}))));var F=()=>{let{site_name:e}=window.config;return d.h("header",null,d.h("h2",{class:"text-2xl font-bold leading-7 text-gray-900 sm:text-3xl sm:truncate"},e))};var q=()=>d.h("footer",null,"Copyright \xA9 ",new Date().getFullYear()," Your Name All Rights Reserved");d.on("//",e=>{let t=document.querySelectorAll(".sidebar a");for(let n=0;n<t.length;++n)t[n].classList.remove("active");t=document.querySelectorAll(`[href='${e}']`);for(let n=0;n<t.length;++n)t[n].classList.add("active")});var J=()=>{let{main_element:e}=window.config.theme;return d.h("div",{class:"page"},d.h(V,null),d.h("main",{class:"main"},d.h(F,null),d.h("div",{class:"content",id:e}),d.h(q,null)))},D={styles:["https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css","/style.css"],Layout:J};var z=e=>new Promise((t,n)=>{let o=document.createElement("link");o.rel="stylesheet",o.type="text/css",o.href=e,o.onload=t,o.onerror=n,document.head.appendChild(o)}),U=(e,t=null)=>new Promise((n,o)=>{let s=document.createElement("script");s.src=e,t&&(s.type=t),s.onload=n,s.onerror=o,document.body.appendChild(s)}),Q=(e,t)=>{let[n,o]=e;l.once(n,async()=>{let s=await import(`${o}`);new s.default().mount(t,{route:n}),l.route(location.pathname)})},X=(e,t)=>{e&&e.forEach(n=>Q(n,t))},Z=async({Layout:e,styles:t=null,scripts:n=null,body_class:o=null})=>{if(document.head.parentElement.dataset.static==null){if(t)for(let s=0;s<t.length;s++)await z(t[s]);document.head.parentElement.dataset.static="true"}if(n)for(let s=0;s<n.length;s++)await U(n[s]);o&&document.body.classList.add(...o),e&&l.render(document.body,React.createElement(e,null)),l.route(location.pathname)};l.on("//",()=>{let e=document.querySelectorAll('a[href*="/"]');for(let t=0;t<e.length;t++){let n=e[t];n.onclick=o=>{o.preventDefault(),history.pushState(null,"",n.href),l.route(n.pathname)}}});var tt=()=>{U("https://unpkg.com/apprun/dist/apprun-dev-tools.js")};window.config={site_name:"AppRun Site",site_url:"https://apprunjs.github.io/apprun-starter/",copyright:"Copyright &copy; 2022",theme:{name:"src/tailwind/layout",main_element:"my-app"},nav:[{text:"Home",link:"/"},{text:"Contact",link:"/contact"},{text:"About",link:"/about"}],sidebar:[{text:"Home",link:"/"},{text:"Contact",link:"/contact"},{text:"About",link:"/about"}]};var et=[["/","/index.js"],["/products","/products/index.js"],["/about","/about/index.js"],["/contact","/contact/index.js"]];X(et,"my-app");Z(D);tt();
//# sourceMappingURL=main.js.map
